# Simple Malware Test for Ghost Layer
Write-Host "=== Ghost Layer Simple Malware Test ===" -ForegroundColor Green

# Create test directory
$testDir = "C:\Ghost_Secrets\simple_test"
if (!(Test-Path $testDir)) {
    New-Item -ItemType Directory -Path $testDir -Force
}

# Test 1: Create high entropy file
Write-Host "1. Creating high entropy file..." -ForegroundColor Cyan
$random = New-Object System.Random
$bytes = New-Object byte[] 1024
$random.NextBytes($bytes)
[System.IO.File]::WriteAllBytes("$testDir\packed_malware.bin", $bytes)

# Test 2: Create suspicious processes
Write-Host "2. Creating suspicious processes..." -ForegroundColor Cyan

# Start suspicious named processes
Start-Process powershell -ArgumentList "-Command Write-Host 'mimikatz running'; Start-Sleep 15" -WindowStyle Hidden
Start-Process powershell -ArgumentList "-Command Write-Host 'keylogger active'; Start-Sleep 12" -WindowStyle Hidden
Start-Process powershell -ArgumentList "-Command Write-Host 'cryptolocker encrypting'; Start-Sleep 18" -WindowStyle Hidden

# Test 3: Create suspicious files
Write-Host "3. Creating suspicious files..." -ForegroundColor Cyan
"suspicious content" | Out-File "$testDir\mimikatz.exe"
"suspicious content" | Out-File "$testDir\keylogger.exe"
"suspicious content" | Out-File "$testDir\ransomware.exe"

# Test 4: RCE simulation
Write-Host "4. Simulating RCE attack..." -ForegroundColor Cyan
Start-Process powershell -ArgumentList "-Command Write-Host 'RCE from browser'; Start-Sleep 10" -WindowStyle Hidden

Write-Host "`nTest complete! Check Ghost Layer dashboard for detections." -ForegroundColor Green
Write-Host "Test directory: $testDir" -ForegroundColor White
